<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silver Gauge V2 - Complete Geometric Analysis</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #f9fafb;
            --text: #1f2937;
            --border: #e5e7eb;
            --explore-color: #3b82f6;
            --efficiency-color: #8b5cf6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            margin-bottom: 0.5rem;
        }

        header .version {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .container {
            max-width: 1600px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .intro-panel {
            background: linear-gradient(135deg, #f0f9ff, #e0e7ff);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 6px solid var(--primary);
        }

        .intro-panel h2 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .intro-panel p {
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
        }

        .intro-panel .highlight {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-weight: 600;
        }

        .control-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .control-card.goal { border-top: 4px solid #3b82f6; }
        .control-card.info { border-top: 4px solid #8b5cf6; }
        .control-card.cost { border-top: 4px solid #ef4444; }

        .control-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .control-value {
            font-size: 2rem;
            font-weight: bold;
        }

        .control-card.goal .control-value { color: #3b82f6; }
        .control-card.info .control-value { color: #8b5cf6; }
        .control-card.cost .control-value { color: #ef4444; }

        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: var(--border);
            outline: none;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            margin: 1rem 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .dual-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .bundle-panel {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .bundle-panel.explore {
            border-top: 6px solid var(--explore-color);
        }

        .bundle-panel.efficiency {
            border-top: 6px solid var(--efficiency-color);
        }

        .bundle-panel h2 {
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .bundle-panel.explore h2 { color: var(--explore-color); }
        .bundle-panel.efficiency h2 { color: var(--efficiency-color); }

        .formula-display {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            border: 2px dashed var(--border);
        }

        .means-visualization {
            margin: 2rem 0;
        }

        .means-bars {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .mean-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .mean-label {
            width: 120px;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .mean-bar-container {
            flex: 1;
            height: 30px;
            background: var(--border);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .mean-bar-fill {
            height: 100%;
            border-radius: 15px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .mean-bar-fill.harmonic {
            background: linear-gradient(90deg, #ef4444, #f87171);
        }

        .mean-bar-fill.geometric {
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
        }

        .mean-bar-fill.arithmetic {
            background: linear-gradient(90deg, #10b981, #34d399);
        }

        .gauge-section {
            margin: 2rem 0;
        }

        .gauge-section h3 {
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .gauge-container {
            margin: 1.5rem 0;
        }

        .gauge {
            width: 100%;
            height: 50px;
            background: linear-gradient(to right,
                #ef4444 0%,
                #f59e0b 25%,
                #fbbf24 50%,
                #84cc16 75%,
                #10b981 100%);
            border-radius: 25px;
            position: relative;
            overflow: visible;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .gauge-indicator {
            position: absolute;
            top: -15px;
            width: 6px;
            height: 80px;
            background: white;
            border: 3px solid var(--text);
            border-radius: 3px;
            transition: left 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            z-index: 10;
        }

        .gauge-indicator::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 10px solid var(--text);
        }

        .gauge-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #6b7280;
            font-weight: 600;
        }

        .k-value-display {
            background: linear-gradient(135deg, #f0f9ff, #e0e7ff);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            margin: 1rem 0;
        }

        .k-value-display .k-label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }

        .k-value-display .k-number {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .bundle-panel.explore .k-number {
            color: var(--explore-color);
        }

        .bundle-panel.efficiency .k-number {
            color: var(--efficiency-color);
        }

        .k-value-display .k-interpretation {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text);
        }

        .preset-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .preset-section h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .preset-btn {
            padding: 1.5rem;
            border: 3px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.2s;
            text-align: center;
        }

        .preset-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(37, 99, 235, 0.3);
        }

        .preset-btn:active {
            transform: translateY(-2px);
        }

        .preset-btn .preset-emoji {
            font-size: 2rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        .preset-btn .preset-desc {
            font-size: 0.9rem;
            font-weight: normal;
            opacity: 0.8;
            margin-top: 0.5rem;
        }

        .pedagogy-section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .pedagogy-section h2 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid var(--border);
            padding-bottom: 0.5rem;
        }

        .pedagogy-section h3 {
            color: var(--secondary);
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
        }

        .pedagogy-section p {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .pedagogy-section ul {
            margin: 1rem 0 1rem 2rem;
            font-size: 1.1rem;
        }

        .pedagogy-section li {
            margin-bottom: 0.8rem;
            line-height: 1.8;
        }

        .pedagogy-box {
            background: #f0f9ff;
            border-left: 6px solid var(--primary);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .pedagogy-box.warning {
            background: #fff7ed;
            border-left-color: var(--warning);
        }

        .pedagogy-box.success {
            background: #f0fdf4;
            border-left-color: var(--success);
        }

        .formula-box {
            background: #1f2937;
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            margin: 1.5rem 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .comparison-table th {
            background: var(--bg);
            font-weight: 600;
            color: var(--primary);
        }

        .comparison-table tr:hover {
            background: #f9fafb;
        }

        footer {
            text-align: center;
            padding: 3rem 2rem;
            color: #6b7280;
            margin-top: 4rem;
            border-top: 1px solid var(--border);
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 1200px) {
            .dual-panel {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .control-grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2rem;
            }

            .preset-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>ü•à The Silver Gauge V2</h1>
        <div class="subtitle">Complete Geometric Analysis of Multi-Objective Decision Making</div>
        <div class="version">Part of the MacGyver MUD Cognitive Architecture | Version 2.0</div>
    </header>

    <div class="container">
        <!-- Introduction -->
        <div class="intro-panel">
            <h2>What You're Seeing</h2>
            <p>This visualizer demonstrates a novel approach to analyzing decision-making in AI systems using <strong>Pythagorean means</strong>‚Äîa geometric lens that reveals the <em>shape</em> of trade-offs, not just the final score.</p>
            <p>Traditional AI scoring produces a single number: <code>score = Œ±¬∑goal + Œ≤¬∑info - Œ≥¬∑cost</code></p>
            <p>The Silver Gauge adds geometric structure by computing <strong>two shape coefficients</strong> that measure balance and efficiency.</p>
            <div class="highlight">
                üí° <strong>Key Insight:</strong> By measuring how Harmonic, Geometric, and Arithmetic means relate, we can distinguish between "balanced exploration" (k ‚âà 1.0) and "specialist focus" (k ‚âà 0.3) without changing the agent's behavior.
            </div>
        </div>

        <!-- Controls -->
        <div class="control-grid">
            <div class="control-card goal">
                <div class="control-label">
                    <span>üéØ Goal Value</span>
                    <span class="control-value" id="goal-display">5.0</span>
                </div>
                <input type="range" id="goal-slider" min="0" max="10" step="0.1" value="5">
                <small>Expected contribution toward the objective (0-10)</small>
            </div>

            <div class="control-card info">
                <div class="control-label">
                    <span>üîç Information Gain</span>
                    <span class="control-value" id="info-display">5.0</span>
                </div>
                <input type="range" id="info-slider" min="0" max="10" step="0.1" value="5">
                <small>Expected reduction in uncertainty (0-10)</small>
            </div>

            <div class="control-card cost">
                <div class="control-label">
                    <span>‚ö†Ô∏è Cost</span>
                    <span class="control-value" id="cost-display">2.0</span>
                </div>
                <input type="range" id="cost-slider" min="0" max="10" step="0.1" value="2">
                <small>Action cost / resource expenditure (0-10)</small>
            </div>
        </div>

        <!-- Dual Bundle Visualization -->
        <div class="dual-panel">
            <!-- Exploration Bundle -->
            <div class="bundle-panel explore">
                <h2>üìä Exploration Bundle</h2>
                <div class="formula-display">
                    Analyzing: <strong>Goal</strong> vs <strong>Info</strong>
                </div>

                <div class="means-visualization">
                    <h3 style="font-size: 1.2rem; margin-bottom: 1rem;">Pythagorean Means</h3>
                    <div class="means-bars">
                        <div class="mean-bar">
                            <div class="mean-label">H (Harmonic)</div>
                            <div class="mean-bar-container">
                                <div class="mean-bar-fill harmonic" id="explore-hm-bar">
                                    <span id="explore-hm-value">0.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="mean-bar">
                            <div class="mean-label">G (Geometric)</div>
                            <div class="mean-bar-container">
                                <div class="mean-bar-fill geometric" id="explore-gm-bar">
                                    <span id="explore-gm-value">0.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="mean-bar">
                            <div class="mean-label">A (Arithmetic)</div>
                            <div class="mean-bar-container">
                                <div class="mean-bar-fill arithmetic" id="explore-am-bar">
                                    <span id="explore-am-value">0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <small style="color: #6b7280; font-style: italic;">Mathematical invariant: H ‚â§ G ‚â§ A (equality when goal = info)</small>
                </div>

                <div class="gauge-section">
                    <h3>k_explore = G / A</h3>
                    <div class="gauge-container">
                        <div class="gauge">
                            <div class="gauge-indicator" id="explore-gauge-indicator"></div>
                        </div>
                        <div class="gauge-labels">
                            <span>Specialist (0.0)</span>
                            <span>Balanced (1.0)</span>
                        </div>
                    </div>
                </div>

                <div class="k-value-display">
                    <div class="k-label">Shape Coefficient</div>
                    <div class="k-number" id="explore-k-value">0.000</div>
                    <div class="k-interpretation" id="explore-k-interp">Perfectly Balanced</div>
                </div>
            </div>

            <!-- Efficiency Bundle -->
            <div class="bundle-panel efficiency">
                <h2>‚ö° Efficiency Bundle</h2>
                <div class="formula-display">
                    Analyzing: <strong>(Goal + Info)</strong> vs <strong>Cost</strong>
                </div>

                <div class="means-visualization">
                    <h3 style="font-size: 1.2rem; margin-bottom: 1rem;">Pythagorean Means</h3>
                    <div class="means-bars">
                        <div class="mean-bar">
                            <div class="mean-label">H (Harmonic)</div>
                            <div class="mean-bar-container">
                                <div class="mean-bar-fill harmonic" id="efficiency-hm-bar">
                                    <span id="efficiency-hm-value">0.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="mean-bar">
                            <div class="mean-label">G (Geometric)</div>
                            <div class="mean-bar-container">
                                <div class="mean-bar-fill geometric" id="efficiency-gm-bar">
                                    <span id="efficiency-gm-value">0.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="mean-bar">
                            <div class="mean-label">A (Arithmetic)</div>
                            <div class="mean-bar-container">
                                <div class="mean-bar-fill arithmetic" id="efficiency-am-bar">
                                    <span id="efficiency-am-value">0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <small style="color: #6b7280; font-style: italic;">Mathematical invariant: H ‚â§ G ‚â§ A (equality when benefit = cost)</small>
                </div>

                <div class="gauge-section">
                    <h3>k_efficiency = G / A</h3>
                    <div class="gauge-container">
                        <div class="gauge">
                            <div class="gauge-indicator" id="efficiency-gauge-indicator"></div>
                        </div>
                        <div class="gauge-labels">
                            <span>Poor ROI (0.0)</span>
                            <span>Balanced (1.0)</span>
                        </div>
                    </div>
                </div>

                <div class="k-value-display">
                    <div class="k-label">Shape Coefficient</div>
                    <div class="k-number" id="efficiency-k-value">0.000</div>
                    <div class="k-interpretation" id="efficiency-k-interp">Perfectly Balanced</div>
                </div>
            </div>
        </div>

        <!-- Presets -->
        <div class="preset-section">
            <h2>üìå Example Scenarios</h2>
            <div class="preset-grid">
                <button class="preset-btn" onclick="setPureExplorer()">
                    <span class="preset-emoji">üîç</span>
                    Pure Explorer
                    <div class="preset-desc">High info, low goal, low cost</div>
                </button>
                <button class="preset-btn" onclick="setPureExploiter()">
                    <span class="preset-emoji">üéØ</span>
                    Pure Exploiter
                    <div class="preset-desc">High goal, low info, low cost</div>
                </button>
                <button class="preset-btn" onclick="setBalanced()">
                    <span class="preset-emoji">‚öñÔ∏è</span>
                    Balanced Agent
                    <div class="preset-desc">Equal goal & info, moderate cost</div>
                </button>
                <button class="preset-btn" onclick="setExpensiveWin()">
                    <span class="preset-emoji">üí∞</span>
                    Expensive Win
                    <div class="preset-desc">High goal, high cost</div>
                </button>
                <button class="preset-btn" onclick="setCheapExplore()">
                    <span class="preset-emoji">üÜì</span>
                    Cheap Explore
                    <div class="preset-desc">Low values, very low cost</div>
                </button>
                <button class="preset-btn" onclick="setPanicMode()">
                    <span class="preset-emoji">üö®</span>
                    PANIC Protocol
                    <div class="preset-desc">High uncertainty, max info-seeking</div>
                </button>
            </div>
        </div>

        <!-- Comprehensive Pedagogy -->
        <div class="pedagogy-section">
            <h2>üìö Complete Mathematical Framework</h2>

            <h3>1. What Are Pythagorean Means?</h3>
            <p>The three classical means‚ÄîHarmonic (H), Geometric (G), and Arithmetic (A)‚Äîprovide different ways to average two positive numbers. For any positive <em>a</em> and <em>b</em>:</p>

            <div class="formula-box">
                H = 2 / (1/a + 1/b)<br>
                G = ‚àö(a √ó b)<br>
                A = (a + b) / 2
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Mean</th>
                        <th>Interpretation</th>
                        <th>When It Matters</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Harmonic (H)</strong></td>
                        <td>Bottleneck / Series average</td>
                        <td>Heavily penalizes imbalance (e.g., 1 and 100 ‚Üí H ‚âà 2)</td>
                    </tr>
                    <tr>
                        <td><strong>Geometric (G)</strong></td>
                        <td>Balanced / Multiplicative average</td>
                        <td>Natural mean for ratios and products (scaling-invariant)</td>
                    </tr>
                    <tr>
                        <td><strong>Arithmetic (A)</strong></td>
                        <td>Simple average</td>
                        <td>Standard mean, treats both values equally</td>
                    </tr>
                </tbody>
            </table>

            <div class="pedagogy-box">
                <strong>Mathematical Invariant:</strong> For any positive <em>a</em> and <em>b</em>, the inequality <code>H ‚â§ G ‚â§ A</code> always holds. Equality occurs if and only if <em>a = b</em> (perfect balance).
            </div>

            <h3>2. The Two Bundles: Exploration vs Efficiency</h3>

            <p>The Silver Gauge computes Pythagorean means for <strong>two different pairs</strong> of values:</p>

            <div class="pedagogy-box success">
                <strong>üìä Exploration Bundle:</strong> Analyzes <code>(goal, info)</code><br>
                ‚Ä¢ Measures balance between pursuing objectives vs reducing uncertainty<br>
                ‚Ä¢ <code>k_explore = G/A</code> quantifies this balance in [0,1]<br>
                ‚Ä¢ k ‚âà 1.0 ‚Üí Agent is equally motivated by goal and information<br>
                ‚Ä¢ k ‚âà 0.3 ‚Üí Agent is specialist (one objective dominates)
            </div>

            <div class="pedagogy-box warning">
                <strong>‚ö° Efficiency Bundle:</strong> Analyzes <code>(goal + info, cost)</code><br>
                ‚Ä¢ Measures favorability of benefits vs expenditure<br>
                ‚Ä¢ <code>k_efficiency = G/A</code> quantifies return-on-investment in [0,1]<br>
                ‚Ä¢ k ‚âà 1.0 ‚Üí Benefits and costs are comparable (balanced ROI)<br>
                ‚Ä¢ k ‚âà 0.3 ‚Üí Poor efficiency (cost dominates or benefits dominate)
            </div>

            <h3>3. Why the Shape Coefficient k = G/A?</h3>

            <p>The ratio <code>k = G/A</code> is a dimensionless measure of balance. Because G ‚â§ A (with equality when values are equal), we have:</p>

            <div class="formula-box">
                k = G/A ‚àà [0, 1]<br>
                <br>
                k = 1.0 ‚ü∫ a = b (perfect balance)<br>
                k ‚Üí 0.0 ‚ü∫ extreme imbalance (one value ‚Üí 0)
            </div>

            <ul>
                <li><strong>k = 1.0:</strong> Geometric mean equals arithmetic mean ‚Üí values are equal ‚Üí perfectly balanced</li>
                <li><strong>k = 0.9:</strong> Very close to balanced (e.g., goal=7, info=3 ‚Üí k ‚âà 0.917)</li>
                <li><strong>k = 0.7:</strong> Moderate imbalance (one value is 3-4√ó the other)</li>
                <li><strong>k = 0.3:</strong> Extreme specialist (one value is 10-100√ó the other)</li>
            </ul>

            <div class="pedagogy-box">
                <strong>Geometric Intuition:</strong> k measures how "circular" vs "elliptical" the decision is. Equal values form a circle (k=1), while extreme imbalance stretches into an ellipse (k‚Üí0).
            </div>

            <h3>4. Connection to Active Inference</h3>

            <p>The MacGyver agent uses Active Inference to score actions based on <strong>Expected Free Energy</strong>:</p>

            <div class="formula-box">
                G = Œ±¬∑goal_value + Œ≤¬∑info_gain - Œ≥¬∑cost
            </div>

            <p>Where:</p>
            <ul>
                <li><strong>Œ±, Œ≤, Œ≥</strong> are learned weights (auto-tuned using Welford's algorithm)</li>
                <li><strong>goal_value:</strong> Expected contribution toward the objective</li>
                <li><strong>info_gain:</strong> Expected reduction in entropy (uncertainty)</li>
                <li><strong>cost:</strong> Resource expenditure for the action</li>
            </ul>

            <p>The Silver Gauge <strong>does not replace</strong> this scoring. Instead, it <strong>annotates</strong> each decision with geometric structure:</p>

            <div class="pedagogy-box success">
                <strong>Traditional Active Inference:</strong><br>
                "This action scores 8.5" ‚Üí Scalar output, opaque<br>
                <br>
                <strong>Active Inference + Silver Gauge:</strong><br>
                "This action scores 8.5 with k_explore=0.92 (balanced) and k_efficiency=0.68 (moderate ROI)" ‚Üí Interpretable shape
            </div>

            <h3>5. Real-World Cognitive Interpretation</h3>

            <p>In the MacGyver MUD cognitive architecture, shape coefficients reveal decision patterns:</p>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>k_explore Value</th>
                        <th>Agent Behavior</th>
                        <th>Critical State Connection</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>k ‚âà 1.0</td>
                        <td>Balanced generalist (equal weight to goal & info)</td>
                        <td>Normal operation</td>
                    </tr>
                    <tr>
                        <td>k ‚âà 0.9</td>
                        <td>Well-balanced explorer</td>
                        <td>Healthy exploration mode</td>
                    </tr>
                    <tr>
                        <td>k ‚âà 0.6</td>
                        <td>Specialist (favors one objective)</td>
                        <td>May trigger NOVELTY protocol</td>
                    </tr>
                    <tr>
                        <td>k ‚âà 0.3</td>
                        <td>Extreme specialist (one-dimensional)</td>
                        <td>May trigger PANIC (if info-starved) or HUBRIS (if over-confident)</td>
                    </tr>
                </tbody>
            </table>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>k_efficiency Value</th>
                        <th>Agent Behavior</th>
                        <th>Critical State Connection</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>k ‚âà 1.0</td>
                        <td>Balanced ROI (benefits ‚âà costs)</td>
                        <td>Efficient operation</td>
                    </tr>
                    <tr>
                        <td>k ‚âà 0.6</td>
                        <td>Moderate efficiency (acceptable trade-off)</td>
                        <td>Normal operation under constraints</td>
                    </tr>
                    <tr>
                        <td>k ‚âà 0.3</td>
                        <td>Poor efficiency (high cost or low benefit)</td>
                        <td>May trigger SCARCITY protocol</td>
                    </tr>
                </tbody>
            </table>

            <h3>6. Why This Matters for AI Safety & Interpretability</h3>

            <div class="pedagogy-box">
                <strong>Problem:</strong> Most AI systems optimize a black-box objective function. When behavior goes wrong, we can't diagnose <em>why</em>.<br>
                <br>
                <strong>Solution:</strong> Geometric annotations like the Silver Gauge provide <strong>introspectable structure</strong>. If an agent gets stuck in a loop, we can query Neo4j:<br>
                <br>
                <code>"Show me all decisions where k_explore < 0.4 and k_efficiency < 0.5"</code><br>
                <br>
                This reveals <strong>patterns</strong> (e.g., "agent was stuck in specialist mode with poor ROI") without changing core behavior.
            </div>

            <ul>
                <li><strong>Transparency:</strong> Shape coefficients are human-interpretable (unlike raw neural network weights)</li>
                <li><strong>Debugging:</strong> Can identify when agent is "stuck" (repeating low-k decisions)</li>
                <li><strong>Safety:</strong> Can detect anomalies (sudden drop in k_efficiency may signal trap/deadlock)</li>
                <li><strong>Meta-cognition:</strong> Agent can monitor its own k values and trigger critical state protocols</li>
            </ul>

            <h3>7. Mathematical Properties & Guarantees</h3>

            <div class="pedagogy-box success">
                <strong>Invariant 1:</strong> k ‚àà [0, 1] always (bounded, well-defined)<br>
                <strong>Invariant 2:</strong> k = 1 ‚ü∫ perfect balance (iff a = b)<br>
                <strong>Invariant 3:</strong> k is scale-invariant (k(10a, 10b) = k(a, b))<br>
                <strong>Invariant 4:</strong> k is symmetric (k(a, b) = k(b, a))
            </div>

            <p>These properties make k a <strong>robust metric</strong> that doesn't depend on arbitrary scaling or units.</p>

            <h3>8. How the MacGyver Agent Uses This</h3>

            <p>The agent computes a Silver Gauge stamp for each decision and stores it in Neo4j as JSON:</p>

            <div class="formula-box" style="text-align: left; font-size: 1rem;">
{<br>
&nbsp;&nbsp;"stamp_version": "silver_v1",<br>
&nbsp;&nbsp;"goal_value": 7.2,<br>
&nbsp;&nbsp;"info_gain": 3.1,<br>
&nbsp;&nbsp;"cost": 2.0,<br>
&nbsp;&nbsp;"k_explore": 0.873,<br>
&nbsp;&nbsp;"k_efficiency": 0.912,<br>
&nbsp;&nbsp;"interpretation": "Well-balanced explorer with good ROI"<br>
}
            </div>

            <p>This enables:</p>
            <ul>
                <li><strong>Post-hoc analysis:</strong> Replay episodes and visualize decision shapes over time</li>
                <li><strong>Episodic memory queries:</strong> "Find all high-k_explore decisions that led to success"</li>
                <li><strong>Critical state detection:</strong> Trigger PANIC when k_explore drops below threshold</li>
                <li><strong>Lyapunov stability monitoring:</strong> Track k variance as divergence signal</li>
            </ul>

            <h3>9. Comparison to Traditional Scoring</h3>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Traditional Scalar Scoring</th>
                        <th>Geometric Silver Gauge</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Single number output</td>
                        <td>Two shape coefficients + full mean breakdown</td>
                    </tr>
                    <tr>
                        <td>Opaque (can't see trade-offs)</td>
                        <td>Transparent (balance is explicit)</td>
                    </tr>
                    <tr>
                        <td>Scale-dependent</td>
                        <td>Scale-invariant (k is dimensionless)</td>
                    </tr>
                    <tr>
                        <td>No geometric invariants</td>
                        <td>H ‚â§ G ‚â§ A guaranteed</td>
                    </tr>
                    <tr>
                        <td>Hard to debug anomalies</td>
                        <td>Can query "low-k" decisions</td>
                    </tr>
                </tbody>
            </table>

            <h3>10. Try It Yourself!</h3>

            <p>Use the sliders above to experiment with different scenarios:</p>

            <ol>
                <li><strong>Set Goal=10, Info=1, Cost=2:</strong> Notice k_explore ‚âà 0.57 (specialist) but k_efficiency ‚âà 0.82 (good ROI)</li>
                <li><strong>Set Goal=5, Info=5, Cost=9:</strong> Notice k_explore = 1.0 (balanced) but k_efficiency ‚âà 0.74 (moderate ROI due to high cost)</li>
                <li><strong>Set Goal=8, Info=7, Cost=0.5:</strong> Both coefficients high ‚Üí "Balanced explorer with excellent efficiency"</li>
                <li><strong>Click presets:</strong> See canonical scenarios from the MacGyver agent's critical state protocols</li>
            </ol>

            <div class="pedagogy-box warning">
                <strong>Key Takeaway:</strong> The Silver Gauge doesn't change the agent's decisions‚Äîit <strong>annotates</strong> them with interpretable geometric structure. This is pure metrology: measuring what was already there, making it visible.
            </div>
        </div>
    </div>

    <footer>
        <p><strong>MacGyver MUD</strong> ‚Äî Production-Grade Meta-Cognitive Agent Architecture</p>
        <p>
            <a href="../../README.md">View Project</a> |
            <a href="../../scoring_silver.py">Source Code</a> |
            <a href="mailto:mrlecko@gmail.com">Contact</a>
        </p>
        <p style="margin-top: 1rem; font-size: 0.9rem;">
            Built with Pythagorean means, Active Inference, and a commitment to interpretable AI.
        </p>
    </footer>

    <script>
        // ====================================================================
        // CORE MATHEMATICS (Validated against test_silver_gauge_math.js)
        // ====================================================================

        function ensurePositive(x, eps = 1e-9) {
            return Math.max(0.0, parseFloat(x)) + eps;
        }

        function harmonicMean(a, b) {
            a = ensurePositive(a);
            b = ensurePositive(b);
            return 2.0 / (1.0 / a + 1.0 / b);
        }

        function geometricMean(a, b) {
            a = ensurePositive(a);
            b = ensurePositive(b);
            return Math.sqrt(a * b);
        }

        function arithmeticMean(a, b) {
            a = ensurePositive(a);
            b = ensurePositive(b);
            return 0.5 * (a + b);
        }

        function calculateExploration(goal, info) {
            const g = ensurePositive(goal);
            const i = ensurePositive(info);

            const hm_gi = harmonicMean(g, i);
            const gm_gi = geometricMean(g, i);
            const am_gi = arithmeticMean(g, i);

            const k_explore = am_gi > 0 ? (gm_gi / am_gi) : 0.0;

            return {
                H: hm_gi,
                G: gm_gi,
                A: am_gi,
                k_explore: k_explore
            };
        }

        function calculateEfficiency(goal, info, cost) {
            const g = ensurePositive(goal);
            const i = ensurePositive(info);
            const c = ensurePositive(cost);

            const g_plus_i = ensurePositive(g + i);

            const hm_gc = harmonicMean(g_plus_i, c);
            const gm_gc = geometricMean(g_plus_i, c);
            const am_gc = arithmeticMean(g_plus_i, c);

            const k_efficiency = am_gc > 0 ? (gm_gc / am_gc) : 0.0;

            return {
                H: hm_gc,
                G: gm_gc,
                A: am_gc,
                k_efficiency: k_efficiency
            };
        }

        function interpretKExplore(k) {
            if (k > 0.95) return "Perfectly Balanced (Generalist)";
            if (k > 0.90) return "Very Well Balanced";
            if (k > 0.80) return "Well-Balanced";
            if (k > 0.65) return "Moderately Balanced";
            if (k > 0.40) return "Specialist (Favors One Objective)";
            return "Extreme Specialist (One-Dimensional)";
        }

        function interpretKEfficiency(k) {
            if (k > 0.95) return "Excellent ROI (Balanced)";
            if (k > 0.85) return "Good Return on Investment";
            if (k > 0.70) return "Moderate Efficiency";
            if (k > 0.50) return "Acceptable Trade-off";
            return "Poor Efficiency";
        }

        // ====================================================================
        // STATE MANAGEMENT
        // ====================================================================

        let state = {
            goal: 5.0,
            info: 5.0,
            cost: 2.0
        };

        // ====================================================================
        // VISUALIZATION UPDATE
        // ====================================================================

        function update() {
            const g = state.goal;
            const i = state.info;
            const c = state.cost;

            // Calculate both bundles
            const explore = calculateExploration(g, i);
            const efficiency = calculateEfficiency(g, i, c);

            // Update control displays
            document.getElementById('goal-display').textContent = g.toFixed(1);
            document.getElementById('info-display').textContent = i.toFixed(1);
            document.getElementById('cost-display').textContent = c.toFixed(1);

            // Update exploration bundle
            updateBundle('explore', explore, 10); // max scale = 10

            // Update efficiency bundle
            const maxEfficiency = Math.max(g + i, c) * 1.2; // dynamic scale
            updateBundle('efficiency', efficiency, maxEfficiency);

            console.log(`State: goal=${g.toFixed(1)}, info=${i.toFixed(1)}, cost=${c.toFixed(1)}`);
            console.log(`Explore: k=${explore.k_explore.toFixed(3)}, Efficiency: k=${efficiency.k_efficiency.toFixed(3)}`);
        }

        function updateBundle(bundleName, data, maxScale) {
            const { H, G, A, k_explore, k_efficiency } = data;
            const k = k_explore !== undefined ? k_explore : k_efficiency;

            // Update mean bars
            updateMeanBar(bundleName, 'hm', H, maxScale);
            updateMeanBar(bundleName, 'gm', G, maxScale);
            updateMeanBar(bundleName, 'am', A, maxScale);

            // Update gauge
            const gaugeIndicator = document.getElementById(`${bundleName}-gauge-indicator`);
            const percentage = k * 100;
            gaugeIndicator.style.left = `calc(${percentage}% - 3px)`;

            // Update k-value display
            const kValueElem = document.getElementById(`${bundleName}-k-value`);
            const kInterpElem = document.getElementById(`${bundleName}-k-interp`);

            kValueElem.textContent = k.toFixed(3);

            if (bundleName === 'explore') {
                kInterpElem.textContent = interpretKExplore(k);
            } else {
                kInterpElem.textContent = interpretKEfficiency(k);
            }
        }

        function updateMeanBar(bundleName, meanName, value, maxScale) {
            const barElem = document.getElementById(`${bundleName}-${meanName}-bar`);
            const valueElem = document.getElementById(`${bundleName}-${meanName}-value`);

            const percentage = Math.min((value / maxScale) * 100, 100);
            barElem.style.width = `${percentage}%`;
            valueElem.textContent = value.toFixed(2);
        }

        // ====================================================================
        // EVENT LISTENERS
        // ====================================================================

        document.getElementById('goal-slider').addEventListener('input', (e) => {
            state.goal = parseFloat(e.target.value);
            update();
        });

        document.getElementById('info-slider').addEventListener('input', (e) => {
            state.info = parseFloat(e.target.value);
            update();
        });

        document.getElementById('cost-slider').addEventListener('input', (e) => {
            state.cost = parseFloat(e.target.value);
            update();
        });

        // ====================================================================
        // PRESET SCENARIOS
        // ====================================================================

        function setPureExplorer() {
            state = { goal: 1.0, info: 10.0, cost: 2.0 };
            syncSliders();
            update();
        }

        function setPureExploiter() {
            state = { goal: 10.0, info: 1.0, cost: 2.0 };
            syncSliders();
            update();
        }

        function setBalanced() {
            state = { goal: 7.0, info: 7.0, cost: 3.0 };
            syncSliders();
            update();
        }

        function setExpensiveWin() {
            state = { goal: 9.0, info: 2.0, cost: 8.0 };
            syncSliders();
            update();
        }

        function setCheapExplore() {
            state = { goal: 2.0, info: 3.0, cost: 0.5 };
            syncSliders();
            update();
        }

        function setPanicMode() {
            // High uncertainty ‚Üí maximize info-seeking (PANIC protocol)
            state = { goal: 3.0, info: 10.0, cost: 1.0 };
            syncSliders();
            update();
        }

        function syncSliders() {
            document.getElementById('goal-slider').value = state.goal;
            document.getElementById('info-slider').value = state.info;
            document.getElementById('cost-slider').value = state.cost;
        }

        // ====================================================================
        // INITIALIZE
        // ====================================================================

        update();
    </script>
</body>
</html>
